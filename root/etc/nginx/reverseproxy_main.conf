worker_processes  1;

error_log  /var/log/nginx/error.log;

events {
    worker_connections  1024;
}

http {
    client_max_body_size 100m;

    # On oblige le passage en HTTPS
    server {
        listen  80;
        server_name lyra-aurigae.space *.lyra-aurigae.space;

        # Passage en HTTPS
        return 301 https://$server_name$request_uri;
    }

    #############################################
    ### Redirections vers les r√©seaux sociaux ###
    #############################################

    # Youtube
    server {
        listen 443;
        server_name youtube.lyra-aurigae.space yt.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://www.youtube.com/channel/UCtBNrHtGO4RxraEwu0fQpAw;
    }

    # Twitter
    server {
        listen 443;
        server_name twitter.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://twitter.com/Kane_Universe;
    }

    # Facebook
    server {
        listen 443;
        server_name facebook.lyra-aurigae.space fb.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://www.facebook.com/Kaneuniverse;
    }

    # Discord
    server {
        listen 443;
        server_name discord.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://discord.gg/VSdGQAU;
    }

    # ArtStation
    server {
        listen 443;
        server_name art.lyra-aurigae.space artstation.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://www.artstation.com/kane_universe;
    }

    # DeviantArt
    server {
        listen 443;
        server_name deviantart.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://www.deviantart.com/kaneuniverse;
    }

    # Twitch
    server {
        listen 443;
        server_name twitch.lyra-aurigae.space tv.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://www.twitch.tv/kaneuniverse;
    }

    # Parrainage
    server {
        listen 443;
        server_name parrainage.lyra-aurigae.space parrain.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://enlist.thebase.sc/fr/?twitch=kaneuniverse&youtube=/channel/UCtBNrHtGO4RxraEwu0fQpAw&referral=STAR-MSCJ-7FRM;
    }

    # Corpo RSI
    server {
        listen 443;
        server_name starcitizen.lyra-aurigae.space star-citizen.lyra-aurigae.space corpo.lyra-aurigae.space corporation.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://robertsspaceindustries.com/orgs/LYA;
    }

    # Tipeee
    server {
        listen 443;
        server_name tipeee.lyra-aurigae.space tip.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://en.tipeee.com/kaneuniverse;
    }

    # Ko-Fi
    server {
        listen 443;
        server_name ko-fi.lyra-aurigae.space kofi.lyra-aurigae.space don.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://ko-fi.com/kaneuniverse;
    }

    # Utip
    server {
        listen 443;
        server_name utip.lyra-aurigae.space;

        # Redirection
        include /etc/nginx/reverseproxy_main_include_ssl.conf;
        return 301 https://utip.io/aaronkane;
    }

    ###########################################
    ### Reverse proxy pour l'administration ###
    ###########################################

    # Autre
    #server {
    #    listen 8080 ssl;
    #    server_name lyra-aurigae.space *.lyra-aurigae.space;
    #
    #    include /etc/nginx/reverseproxy_main_include_ssl.conf;
    #
    #    # [DEFINIR]
    #    location / {
    #        proxy_pass http://[IP_Docker]:80;
    #
    #        include /etc/nginx/reverseproxy_main_include_proxy.conf;
    #    }
    #}

    #######################################
    ### Reverse proxy pour le front-end ###
    #######################################

    # Wiki : wiki.lyra-aurigae.space
    server {
        listen 443 ssl;
        server_name wiki.lyra-aurigae.space;

        include /etc/nginx/reverseproxy_main_include_ssl.conf;

        # Site principal
        location / {
            proxy_pass http://[IP_Docker_Wiki]:80;

            include /etc/nginx/reverseproxy_main_include_proxy.conf;
        }
    }

    # Autre
    server {
        listen 443 ssl;
        server_name lyra-aurigae.space *.lyra-aurigae.space;

        include /etc/nginx/reverseproxy_main_include_ssl.conf;

        # Site principal
        location / {
            proxy_pass http://[IP_Docker]:80;

            include /etc/nginx/reverseproxy_main_include_proxy.conf;
        }
    }